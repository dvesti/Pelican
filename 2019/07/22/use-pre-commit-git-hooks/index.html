<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://blog.dmitriev.ee/theme/css/style.min.css?fc5adb95">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Talha Mansoor" />

        <meta name="description" content="Elegant use the Pre-commit tool to standardize on various concepts. This article gives more information about the tool and how to run it locally.
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content=", Contributing, " />

<meta property="og:title" content="Using Pre-Commit Git Hooks "/>
<meta property="og:url" content="https://blog.dmitriev.ee/2019/07/22/use-pre-commit-git-hooks/" />
<meta property="og:description" content="Elegant use the Pre-commit tool to standardize on various concepts. This article gives more information about the tool and how to run it locally." />
<meta property="og:site_name" content="Pelican-200" />
<meta property="og:article:author" content="Talha Mansoor" />
<meta property="og:article:published_time" content="2019-07-22T23:17:00+03:00" />
<meta name="twitter:title" content="Using Pre-Commit Git Hooks ">
<meta name="twitter:description" content="Elegant use the Pre-commit tool to standardize on various concepts. This article gives more information about the tool and how to run it locally.">
<meta property="og:image" content="/theme/images/apple-touch-icon-152x152.png" />
<meta name="twitter:image" content="/theme/images/apple-touch-icon-152x152.png" >

        <title>Using Pre-Commit Git Hooks  · Pelican-200
</title>
        <link rel="shortcut icon" href="https://blog.dmitriev.ee/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-152x152.png" type="image/png" />
        <link rel="apple-touch-icon" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon.png"  type="image/png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-57x57.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-72x72.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="76x76" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-76x76.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-114x114.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="120x120" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-120x120.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-144x144.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="152x152" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-152x152.png" type="image/png" />
        <link rel="apple-touch-icon" sizes="152x152" href="https://blog.dmitriev.ee/theme/images/apple-touch-icon-180x180.png" type="image/png" />
        <link href="https://blog.dmitriev.ee/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Pelican-200 - Full Atom Feed" />


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://blog.dmitriev.ee/"><span class=site-name>Pelican-200</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://blog.dmitriev.ee
                                    >Главная</a>
                                </li>
                                <li ><a href="https://blog.dmitriev.ee/categories">Категории</a></li>
                                <li ><a href="https://blog.dmitriev.ee/tags.html">Тэги</a></li>
                                <li ><a href="https://blog.dmitriev.ee/archives/{slug}">Архив</a></li>
                                <li><form class="navbar-search" action="https://blog.dmitriev.ee/search/index.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://blog.dmitriev.ee/2019/07/22/use-pre-commit-git-hooks/">
                Using Pre-Commit Git&nbsp;Hooks
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#arent-git-hooks-hard-to-get-right">Aren’t Git Hooks Hard to Get Right?</a></li>
<li><a href="#why-use-pre-commit-locally">Why Use Pre-commit Locally?</a></li>
<li><a href="#how-do-i-install-it">How Do I Install It?</a></li>
<li><a href="#how-do-i-use-it-locally">How Do I Use It Locally?</a></li>
<li><a href="#can-i-run-the-hooks-without-a-commit">Can I Run The Hooks Without a Commit?</a></li>
<li><a href="#how-does-the-project-run-the-hooks-for-submissions">How Does The Project Run the Hooks For Submissions?</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<p>When there was a single developer working on the Elegant project, there were none of the
common problems associated with team projects: different styles and different processes. After
the project was moved to the current
<a href="https://blog.dmitriev.ee/2019/01/05/community-led-project/">bazaar development model</a>, the team thought it
best that all changes should follow the same set of stylistic guidelines.</p>
<p>The Git clients provide a concept called
<a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">Git hooks</a>. Git hooks allow for
custom code to be triggered when certain actions are performed with Git. One of the most
common triggers is the pre-commit trigger, used to activate a program between a client
request to commit and the actual act of committing the change. If the program reports a
failure, the commit is aborted, hopefully with the failed program providing enough information
for the user to diagnose the issue.</p>
<h2 id="arent-git-hooks-hard-to-get-right">Aren’t Git Hooks Hard to Get Right?<a class="headerlink" href="#arent-git-hooks-hard-to-get-right" title="Permanent link"> </a></h2>
<p>If you have tried to set up Git hooks before, there are usually two problems you have faced:
the concept can be hard for people to understand and Git hooks are often frustrating difficult
to debug. Add onto this the different operating systems and versions of those systems on top
of that, and you can quickly get into nightmare territory for maintaining a Git hook.</p>
<p>To solve most of these problems, the team decided to use the
<a href="https://pre-commit.com/">Pre-Commit</a>
Python package which provides a simple layer of abstraction over the Git hooks. The Pre-commit
package makes managing, sharing and updating the Git hooks very easy. As it installs itself as
a Git hook, once you have installed it properly, you may easily confuse it as a part of Git’s
commit process.</p>
<h2 id="why-use-pre-commit-locally">Why Use Pre-commit Locally?<a class="headerlink" href="#why-use-pre-commit-locally" title="Permanent link"> </a></h2>
<p>Pre-commit runs Git hooks that among other things:</p>
<ul>
<li>Run <a href="https://github.com/prettier/prettier">Prettier</a></li>
<li>applies common styling for Markdown, <span class="caps">CSS</span>, <span class="caps">JS</span> and json files</li>
<li>Run <a href="https://github.com/python/black">Black</a></li>
<li>applies common styling for Python files</li>
<li>Removes trailing whitespace on lines</li>
<li>Fixes the end of files to a common style</li>
</ul>
<p>Addressing any failures reported by these hooks locally will result in a smaller turn around
time in getting those issues addressed. This in turn will save time when submitting changes
in a Pull Request, as you have already dealt with any errors that this tool may report.</p>
<h2 id="how-do-i-install-it">How Do I Install It?<a class="headerlink" href="#how-do-i-install-it" title="Permanent link"> </a></h2>
<p>The package itself is installed in typical Python fashion by using the Pip command:</p>
<div class="highlight"><pre><span></span>pip install pre-commit
</pre></div>
<p>Once installed in your environment, you can install the Git hooks for your local repository
by changing your directory to the root of that repository and executing the following command:</p>
<div class="highlight"><pre><span></span>pre-commit install
</pre></div>
<h2 id="how-do-i-use-it-locally">How Do I Use It Locally?<a class="headerlink" href="#how-do-i-use-it-locally" title="Permanent link"> </a></h2>
<p>Once installed, Pre-commit appears to be part of the Git commit process. When you perform
your next <code>git commit</code> command (including using the <code>git-cz</code> command for the
<a href="https://blog.dmitriev.ee/2019/07/22/use-commitizen-for-git-commits/">Commitizen tool</a>), the Pre-commit package will download any tools
it requires to properly run any required hooks. These tools are cached, so you will typically
only experience a long wait on the first time the Pre-commit package is executed.</p>
<p>If the hooks run by the Pre-commit package fail for some reason, they will clearly notify
you of which of the hooks failed and typically present you with a reason why the hook failed.
Note that some of the hooks, such as the <code>prettier</code> hook, may make some changes to your
files to bring them in line with the project’s common style. If any changes occur, they
will not be staged to your local repository, making any changes visible using the <code>git status</code>
command.</p>
<p>If the hook failed due to an error, you need to fix that error before it will allow you to
continue. If the hook failed because it made a change, make sure to verify the change that
was made for you, after making sure it will not have a negative effect on your changes. It
is then your responsibility to stage all changes to the repository before committing the
change again.</p>
<div class="admonition warning">
<p class="admonition-title">For Windows Users</p>
<p>If you run these checks on Windows, the <code>check-executables-have-shebangs</code> hook will fail as Windows does not require that executable files start with a <a href="shebang">shebang</a> and all files implicitly have the <code>execute</code> or <code>+x</code> permission for Linux.</p>
<p>To skip this check, enter <code>set SKIP=check-executables-have-shebangs</code> on the command line before you execute the Pre-commit package, either from a Git hook as detailed above, or manually, as detail in the following section.</p>
</div>
<h2 id="can-i-run-the-hooks-without-a-commit">Can I Run The Hooks Without a Commit?<a class="headerlink" href="#can-i-run-the-hooks-without-a-commit" title="Permanent link"> </a></h2>
<p>The full set of hooks are available by entering the following command:</p>
<div class="highlight"><pre><span></span>pre-commit run -a
</pre></div>
<p>This will run the full set of hooks and report any errors. It is often useful to run this
command before committing, even if you are using
<a href="./commitizien.md">Commitizen</a>
for your commits as is recommended.</p>
<h2 id="how-does-the-project-run-the-hooks-for-submissions">How Does The Project Run the Hooks For Submissions?<a class="headerlink" href="#how-does-the-project-run-the-hooks-for-submissions" title="Permanent link"> </a></h2>
<p>The Elegant team fully believes in the Git hooks and their benefit to the team. As such, the
Pre-commit package is executed on all of our team builds (using Travis <span class="caps">CI</span>) for any commits and
pull requests made on the Travis <span class="caps">CI</span> servers. For more information on how we use Travis <span class="caps">CI</span> to
build the project, check out the article on
<a href="./travis-ci-and-doc-website.md">Elegant and Travis <span class="caps">CI</span></a>.</p>


             
 
                <p id="post-share-links">
    Понравилась статья? Расскажи о ней на:
      <a href="https://twitter.com/intent/tweet?text=Using%20Pre-Commit%20Git%C2%A0Hooks%20&url=https%3A//blog.dmitriev.ee/2019/07/22/use-pre-commit-git-hooks/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
 ❄       <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//blog.dmitriev.ee/2019/07/22/use-pre-commit-git-hooks/" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
 ❄       <a href="mailto:?subject=Using%20Pre-Commit%20Git%C2%A0Hooks%20&amp;body=https%3A//blog.dmitriev.ee/2019/07/22/use-pre-commit-git-hooks/" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>

                <hr />
    <div class="author-blurb">
        <a href="https://www.oncrashreboot.com/" target="_blank" rel="nofollow noopener noreferrer">
            <span class="author-name">Talha Mansoor</span>
        </a>
        is the creator and lead developer of Elegant theme.
    </div>
    <div class="author-blurb">
        <a href="http://jackdewinter.github.io" target="_blank" rel="nofollow noopener noreferrer">
            <span class="author-name">Jack De Winter</span>
        </a>
        ever evolving, ever learning
    </div>

            







            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="https://blog.dmitriev.ee/2019/07/22/elegant-logo/" title="Previous: Elegant Logo">Elegant Logo</a></li>
                <li class="next-article"><a href="https://blog.dmitriev.ee/2019/07/22/developing-for-elegant/" title="Next: Developing Features For Elegant">Developing Features For Elegant</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Дата</h4>
            <time itemprop="dateCreated" datetime="2019-07-22T23:17:00+03:00">Пн, 22 июл. 2019 г.</time>
            <h4>Категория</h4>
            <a class="category-link" href="https://blog.dmitriev.ee/categories#contributing-ref">Contributing</a>
<h4>Будьте с нами</h4>
<div id="sidebar-social-link">
    <a href="github" title="https://github.com/dvesti" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
    <a href="https://github.com/Pelican-Elegant/elegant/milestones" title="Elegant Project Roadmap" target="_blank" rel="nofollow noopener noreferrer">
        <svg onload="w()" xmlns="http://www.w3.org/2000/svg" aria-label="Calendar" role="img" viewBox="0 0 512 512" font-family="monospace" text-anchor="middle" fill="#667777"><script type="text/ecmascript"><![CDATA[w=()=>{c=0;for (i in e={weekday:"long",month:"short",day:'numeric'}) document.getElementsByTagName('text')[c++].textContent=(new Date).toLocaleString(undefined,{[i]:e[i]})}]]></script><defs><clipPath id="c"><rect width="512" height="512" rx="15%"/></clipPath></defs><g clip-path="url(#c)"><rect width="512" height="512" fill="#dee"/><rect width="512" height="180" fill="#d34"/></g><g id="b"><circle fill="#eab" cx="384" cy="100" r="14" id="a"/><use x="43"/><use x="86"/></g><use y="43"/><text font-size="64" x="256" y="480" id="w">Sunday</text><text fill="#fff" font-size="140" x="140" y="164" id="m">FEB</text><text font-size="256" x="256" y="400" id="d">29</text></svg>
    </a>
</div>
            





            



        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        
&copy; Copyright 2020 by Dvesti and licensed under a  <a rel="license nofollow noopener noreferrer"
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
  Creative Commons Attribution 4.0 International License</a>.
  
    </div>

    <div>
        <span class="site-name">Pelican-200</span> - Блог сайта Dmitriev.ee
    </div>



    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://blog.dmitriev.ee/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>